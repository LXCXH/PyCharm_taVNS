<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>taVNS数据处理器详细解释文档</title>
    
    <!-- Mermaid Support -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <!-- MathJax Support -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    
    <!-- Prism.js for Code Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <!-- Chart.js for Data Visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <style>
        /* 全局样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
            display: flex;
        }
        
        /* 侧边导航栏样式 */
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }
        
        .sidebar h1 {
            padding: 0 20px 20px;
            font-size: 1.4em;
            border-bottom: 1px solid #34495e;
            margin-bottom: 20px;
            color: #ecf0f1;
        }
        
        .toc {
            list-style: none;
        }
        
        .toc li {
            margin: 0;
        }
        
        .toc a {
            display: block;
            padding: 12px 20px;
            color: #bdc3c7;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        
        .toc a:hover {
            background: rgba(52, 152, 219, 0.2);
            color: #3498db;
            border-left-color: #3498db;
        }
        
        .toc a.active {
            background: rgba(52, 152, 219, 0.3);
            color: #3498db;
            border-left-color: #3498db;
        }
        
        /* 主内容区样式 */
        .main-content {
            margin-left: 280px;
            padding: 40px;
            background: white;
            min-height: 100vh;
        }
        
        /* 标题样式 */
        h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        h2 {
            color: #34495e;
            font-size: 2em;
            margin: 40px 0 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            position: relative;
        }
        
        h2::before {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 50px;
            height: 3px;
            background: #e74c3c;
        }
        
        h3 {
            color: #2c3e50;
            font-size: 1.5em;
            margin: 30px 0 15px;
            padding-left: 15px;
            border-left: 4px solid #3498db;
        }
        
        h4 {
            color: #34495e;
            font-size: 1.3em;
            margin: 25px 0 10px;
        }
        
        h5, h6 {
            color: #7f8c8d;
            margin: 20px 0 10px;
        }
        
        /* 段落样式 */
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* 列表样式 */
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* 强调样式 */
        strong {
            color: #e74c3c;
            font-weight: 600;
        }
        
        em {
            color: #8e44ad;
            font-style: italic;
        }
        
        /* 代码样式 */
        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.9em;
            color: #e74c3c;
        }
        
        pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }
        
        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }
        
        /* 表格样式 */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        th {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        tr:hover {
            background: #e3f2fd;
            transition: background 0.3s ease;
        }
        
        /* 卡片样式 */
        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid #ecf0f1;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .card-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            margin: -25px -25px 20px;
            border-radius: 12px 12px 0 0;
            font-weight: 600;
        }
        
        /* 警告框样式 */
        .alert {
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid transparent;
        }
        
        .alert-info {
            background: #e3f2fd;
            border-left-color: #2196f3;
            color: #1565c0;
        }
        
        .alert-success {
            background: #e8f5e9;
            border-left-color: #4caf50;
            color: #2e7d32;
        }
        
        .alert-warning {
            background: #fff3e0;
            border-left-color: #ff9800;
            color: #ef6c00;
        }
        
        .alert-danger {
            background: #ffebee;
            border-left-color: #f44336;
            color: #c62828;
        }
        
        /* 数学公式样式 */
        .MathJax {
            font-size: 1.1em !important;
        }
        
        /* 图表容器样式 */
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid #ecf0f1;
        }
        
        .chart-canvas {
            max-height: 400px;
            width: 100% !important;
            height: auto !important;
        }
        
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .comparison-chart {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            border: 1px solid #dee2e6;
        }
        
        /* 简化的数学公式显示 */
        .formula-simple {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #007bff;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 1.1em;
            color: #2c3e50;
        }
        
        /* 流程图容器 */
        .mermaid-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            border: 1px solid #dee2e6;
        }
        
        /* 数据可视化容器 */
        .viz-container {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            border: 1px solid #e0e6ed;
        }
        
        .viz-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .viz-item {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid transparent;
        }
        
        .viz-item.green { border-left-color: #4caf50; }
        .viz-item.blue { border-left-color: #2196f3; }
        .viz-item.orange { border-left-color: #ff9800; }
        .viz-item.red { border-left-color: #f44336; }
        .viz-item.purple { border-left-color: #9c27b0; }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                padding: 20px;
            }
            
            .container {
                flex-direction: column;
            }
            
            h1 { font-size: 2em; }
            h2 { font-size: 1.5em; }
            
            .viz-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #3498db;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #2980b9;
        }
        
        /* 动画效果 */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 打印样式 */
        @media print {
            .sidebar { display: none; }
            .main-content { margin-left: 0; }
            .container { box-shadow: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 侧边导航 -->
        <nav class="sidebar">
            <h1>📋 目录导航</h1>
            <ul class="toc">
                <li><a href="#system-overview" data-section="system-overview">🔬 系统概述</a></li>
                <li><a href="#overall-flowchart" data-section="overall-flowchart">📊 整体流程图</a></li>
                <li><a href="#data-sources" data-section="data-sources">📖 数据来源与基础</a></li>
                <li><a href="#glucose-modeling" data-section="glucose-modeling">🧮 血糖序列建模</a></li>
                <li><a href="#param-optimization" data-section="param-optimization">⚙️ 刺激参数优化模型</a></li>
                <li><a href="#data-augmentation" data-section="data-augmentation">🔄 数据扩充技术</a></li>
                <li><a href="#synthetic-generation" data-section="synthetic-generation">🏭 合成数据生成</a></li>
                <li><a href="#formula-summary" data-section="formula-summary">📊 数学公式汇总</a></li>
                <li><a href="#physiological-basis" data-section="physiological-basis">🧬 生理学基础</a></li>
                <li><a href="#implementation" data-section="implementation">💻 实现细节</a></li>
            </ul>
        </nav>
        
        <!-- 主内容区 -->
        <main class="main-content">
            <header class="fade-in">
                <h1>taVNS数据处理器详细解释文档</h1>
                <div class="alert alert-info">
                    <strong>文档说明:</strong> 本文档详细解释了taVNS数据处理器的数学建模方法、数据扩充技术和训练数据生成过程。包含完整的数学公式推导、可视化图表和实现细节。
                </div>
            </header>
            
            <!-- 系统概述 -->
            <section id="system-overview" class="fade-in">
                <h2>🔬 系统概述</h2>
                
                <div class="card">
                    <div class="card-header">系统简介</div>
                    <p><code>taVNSDataProcessor</code>是一个专门用于经皮耳廓迷走神经刺激(transcutaneous auricular Vagus Nerve Stimulation, taVNS)参数预测的数据处理器。该系统基于<strong>三篇已发表论文</strong>的实证数据，通过<strong>数学建模</strong>和<strong>数据扩充</strong>技术生成大规模训练数据集。</p>
                </div>
                
                <div class="card">
                    <div class="card-header">核心设计理念</div>
                    <ul>
                        <li><strong>多模态数据融合</strong>: 整合动物实验、临床试验和健康人数据</li>
                        <li><strong>生理学驱动建模</strong>: 基于血糖调节生理学的数学建模</li>
                        <li><strong>个体化参数优化</strong>: 考虑个体敏感性差异的自适应调整</li>
                        <li><strong>大规模数据扩充</strong>: 通过6种数学变换生成>10,000训练样本</li>
                    </ul>
                </div>
                
                <div class="card">
                    <div class="card-header">数据流架构</div>
                    <div class="viz-container">
                        <pre><code>论文实证数据 → 基础样本生成 → 数据扩充 → 合成数据生成 → 训练数据集
     ↓              ↓            ↓           ↓             ↓
   3篇论文        ~100样本     ~2,000样本   ~8,000样本   >10,000样本</code></pre>
                    </div>
                </div>
            </section>
            
            <!-- 整体流程图 -->
            <section id="overall-flowchart" class="fade-in">
                <h2>📊 整体流程图</h2>
                
                <div class="card">
                    <div class="card-header">完整数据处理流程</div>
                    <p>以下流程图展示了从论文实证数据到最终训练数据集的完整转换过程:</p>
                    
                    <div class="mermaid-container">
                        <div class="mermaid">
                            graph TD
                                A["📚 论文实证数据"] --> B["🧪 基础样本生成"]
                                
                                A1["论文1: ZDF小鼠<br/>2/15Hz交替, 2mA, 30min"] --> B
                                A2["论文2: IGT患者<br/>20Hz, 1mA, 20min"] --> B  
                                A3["论文3: 健康人<br/>10Hz, 2.3mA, 30min"] --> B
                                
                                B --> C["📊 血糖序列建模"]
                                B --> D["⚙️ 刺激参数建模"]
                                
                                C --> C1["周期性模型<br/>G(t) = G_base × [1 + A×sin(ωt)] + ε(t)"]
                                C --> C2["餐后响应模型<br/>分段函数建模"]
                                C --> C3["糖尿病趋势模型<br/>G(t) = G_base + βt + ε(t)"]
                                C --> C4["特殊模式<br/>黎明现象、苏木杰效应"]
                                
                                D --> D1["统计特征提取<br/>μ_G, σ²_G, β_G"]
                                D1 --> D2["自适应参数调整<br/>基于血糖水平和趋势"]
                                D2 --> D3["个体敏感性建模<br/>S ∈ [0.6, 1.4]"]
                                D3 --> D4["刺激强度计算<br/>I = (f×I×T×PW)/10⁶"]
                                
                                C1 --> E["🔄 数据扩充"]
                                C2 --> E
                                C3 --> E
                                C4 --> E
                                D4 --> E
                                
                                E --> E1["高斯噪声注入<br/>N(0, α×σ²)"]
                                E --> E2["时间扭曲变换<br/>warp_factor ∈ [0.9,1.1]"]
                                E --> E3["幅度缩放变换<br/>scale_factor ∈ [0.9,1.1]"]
                                E --> E4["基线偏移变换<br/>shift ∈ [-0.5,0.5]"]
                                E --> E5["参数变异模拟<br/>mutation_rate ∈ [0.05,0.15]"]
                                E --> E6["个体差异建模<br/>variation ∈ [0.7,1.3]"]
                                
                                E1 --> F["🏭 合成数据生成"]
                                E2 --> F
                                E3 --> F
                                E4 --> F
                                E5 --> F
                                E6 --> F
                                
                                F --> F1["8种血糖模式<br/>正常、IFG、糖尿病、餐后等"]
                                F --> F2["7种参数策略<br/>保守、积极、个性化等"]
                                
                                F1 --> G["📈 最终训练数据集"]
                                F2 --> G
                                
                                G --> G1["基础样本: ~100个"]
                                G --> G2["扩充样本: ~2,000个"] 
                                G --> G3["合成样本: ~8,000个"]
                                G --> G4["总计: >10,000个样本"]
                                
                                G4 --> H["🎯 机器学习训练"]
                                
                                style A fill:#e1f5fe
                                style B fill:#f3e5f5
                                style C fill:#e8f5e8
                                style D fill:#fff3e0
                                style E fill:#fce4ec
                                style F fill:#e0f2f1
                                style G fill:#f1f8e9
                                style H fill:#ffebee
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 数据来源与基础 -->
            <section id="data-sources" class="fade-in">
                <h2>📖 数据来源与基础</h2>
                
                <div class="viz-grid">
                    <div class="card viz-item green">
                        <h3>📊 论文1: ZDF小鼠糖尿病模型</h3>
                        <p><strong>研究背景:</strong> Zucker糖尿病肥胖(ZDF)小鼠模型研究</p>
                        
                        <h4>实验参数:</h4>
                        <ul>
                            <li><strong>刺激模式:</strong> 2Hz/15Hz交替频率（每秒切换）</li>
                            <li><strong>电流强度:</strong> 2.0 mA</li>
                            <li><strong>刺激时长:</strong> 30分钟/次</li>
                            <li><strong>治疗周期:</strong> 持续5周</li>
                            <li><strong>脉冲宽度:</strong> 200 μs（估算值）</li>
                        </ul>
                        
                        <h4>实验结果:</h4>
                        <div class="alert alert-success">
                            <strong>血糖降幅:</strong> 约65%（从~25 mmol/L降至~11 mmol/L）
                        </div>
                        
                        <table>
                            <thead>
                                <tr><th>周数</th><th>对照组(mmol/L)</th><th>治疗组(mmol/L)</th><th>降幅</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>0</td><td>19</td><td>19</td><td>0%</td></tr>
                                <tr><td>1</td><td>22</td><td>10</td><td>-55%</td></tr>
                                <tr><td>2</td><td>24</td><td>11</td><td>-54%</td></tr>
                                <tr><td>3</td><td>27</td><td>12</td><td>-56%</td></tr>
                                <tr><td>4</td><td>29</td><td>12</td><td>-59%</td></tr>
                                <tr><td>5</td><td>32</td><td>11</td><td>-66%</td></tr>
                            </tbody>
                        </table>
                        
                        <!-- ZDF小鼠实验数据图表 -->
                        <div class="comparison-chart">
                            <h5>📊 ZDF小鼠5周治疗效果对比</h5>
                            <canvas id="zdfMouseChart" class="chart-canvas"></canvas>
                        </div>
                    </div>
                    
                    <div class="card viz-item blue">
                        <h3>🏥 论文2: 人体IGT患者临床试验</h3>
                        <p><strong>研究背景:</strong> 糖耐量异常(IGT)患者临床研究</p>
                        
                        <h4>实验参数:</h4>
                        <ul>
                            <li><strong>刺激频率:</strong> 20 Hz</li>
                            <li><strong>电流强度:</strong> 1.0 mA</li>
                            <li><strong>刺激时长:</strong> 20分钟/次</li>
                            <li><strong>脉冲宽度:</strong> 1.0 ms (1000 μs)</li>
                            <li><strong>治疗周期:</strong> 12周</li>
                        </ul>
                        
                        <h4>入组标准:</h4>
                        <ul>
                            <li><strong>空腹血糖:</strong> 7.0-11.1 mmol/L</li>
                            <li><strong>餐后2小时血糖:</strong> 7.8-11.1 mmol/L</li>
                        </ul>
                        
                        <h4>2hPG测试结果:</h4>
                        <table>
                            <thead>
                                <tr><th>时间点</th><th>taVNS组</th><th>假刺激组</th><th>无治疗组</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>基线</td><td>9.7</td><td>9.1</td><td>9.3</td></tr>
                                <tr><td>6周后</td><td>7.3</td><td>8.0</td><td>9.5</td></tr>
                                <tr><td>12周后</td><td>7.5</td><td>8.0</td><td>10.0</td></tr>
                            </tbody>
                        </table>
                        
                        <!-- IGT患者临床试验数据图表 -->
                        <div class="comparison-chart">
                            <h5>📊 IGT患者12周2hPG测试结果对比</h5>
                            <canvas id="igtPatientChart" class="chart-canvas"></canvas>
                        </div>
                    </div>
                    
                    <div class="card viz-item orange">
                        <h3>👨‍⚕️ 论文3: 健康人餐后血糖抑制实验</h3>
                        <p><strong>研究背景:</strong> 健康成人餐后血糖调节研究</p>
                        
                        <h4>实验参数:</h4>
                        <ul>
                            <li><strong>刺激频率:</strong> 10 Hz</li>
                            <li><strong>电流强度:</strong> 2.0-2.3 mA</li>
                            <li><strong>刺激时长:</strong> 30分钟/次</li>
                            <li><strong>脉冲宽度:</strong> 0.3 ms (300 μs)</li>
                        </ul>
                        
                        <h4>两种实验协议:</h4>
                        <div class="alert alert-info">
                            <strong>协议1:</strong> 餐后刺激<br>
                            <strong>协议2:</strong> 餐前刺激(220 kcal负荷)
                        </div>
                        
                        <h4>血糖响应效果:</h4>
                        <p>taVNS组相比假刺激组显示出显著的餐后血糖抑制效果，峰值降低约10-15%，AUC减少约8-12%。</p>
                        
                        <!-- 健康人餐后血糖抑制实验数据图表 -->
                        <div class="comparison-chart">
                            <h5>📊 健康人餐后血糖抑制效果对比</h5>
                            <canvas id="healthyPersonChart" class="chart-canvas"></canvas>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 血糖序列建模 -->
            <section id="glucose-modeling" class="fade-in">
                <h2>🧮 血糖序列建模</h2>
                
                <div class="card">
                    <div class="card-header">建模概述</div>
                    <p>血糖序列建模是整个数据处理器的核心，通过数学模型模拟不同生理和病理状态下的血糖变化模式。</p>
                </div>
                
                <!-- 周期性血糖波动模型 -->
                <div class="card">
                    <h3>1. 周期性血糖波动模型</h3>
                    
                    <h4>数学模型:</h4>
                    <div class="formula-simple">
                        G(t) = G_base × [1 + A × sin(ωt)] + ε(t)
                    </div>
                    
                    <h4>参数定义:</h4>
                    <ul>
                        <li><code>G_base</code>: 基础血糖水平 (mmol/L)</li>
                        <li><code>A</code>: 振幅系数</li>
                        <li><code>ω = π/6</code>: 角频率 (对应12个时间点的1小时周期)</li>
                        <li><code>ε(t)</code>: 高斯白噪声 N(0, σ²)</li>
                    </ul>
                    
                    <div class="viz-grid">
                        <div class="viz-item green">
                            <h5>高变异性模式 (治疗前状态):</h5>
                            <div class="formula-simple">
                                G_high(t) = G_base × [1 + 0.1 × sin(t × π/6)] + N(0, (G_base × 0.05)²)
                            </div>
                            <p><strong>特点:</strong> 血糖波动较大，反映糖尿病患者的不稳定状态</p>
                        </div>
                        
                        <div class="viz-item blue">
                            <h5>低变异性模式 (治疗后状态):</h5>
                            <div class="formula-simple">
                                G_low(t) = G_base × [1 + 0.05 × sin(t × π/6)] + N(0, (G_base × 0.02)²)
                            </div>
                            <p><strong>特点:</strong> 血糖波动减小，反映taVNS治疗后的稳定效果</p>
                        </div>
                    </div>
                    
                    <h4>📊 周期性模型数据扩充示例</h4>
                    
                    <div class="card">
                        <h5>基础数据示例:</h5>
                        <pre><code>G_base = 8.5 mmol/L
时间点: [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55] (分钟)
原始血糖: [8.3, 8.8, 9.1, 8.9, 8.4, 8.2, 8.3, 8.7, 9.0, 8.8, 8.5, 8.4] mmol/L</code></pre>
                    </div>
                    
                    <!-- 周期性血糖波动对比图 -->
                    <div class="comparison-chart">
                        <h5>🔄 数据扩充效果对比</h5>
                        <canvas id="cyclicGlucoseChart" class="chart-canvas"></canvas>
                    </div>
                    
                    <div class="mermaid-container">
                        <div class="mermaid">
                            graph LR
                                A["原始序列<br/>[8.3, 8.8, 9.1, 8.9, 8.4, 8.2]"] --> B["噪声水平 0.02<br/>[8.28, 8.83, 9.13, 8.91, 8.38, 8.17]"]
                                A --> C["噪声水平 0.05<br/>[8.25, 8.89, 9.17, 8.86, 8.45, 8.24]"]
                                
                                style A fill:#e3f2fd
                                style B fill:#fff3e0
                                style C fill:#fce4ec
                        </div>
                    </div>
                    
                    <div class="viz-container">
                        <h5>扩充效果统计:</h5>
                        <table>
                            <thead>
                                <tr>
                                    <th>扩充方法</th>
                                    <th>样本增量</th>
                                    <th>血糖范围</th>
                                    <th>变异系数</th>
                                    <th>临床意义</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>原始数据</td><td>1×</td><td>8.2-9.1</td><td>0.034</td><td>基准参考</td></tr>
                                <tr><td>高斯噪声</td><td>4×</td><td>8.0-9.3</td><td>0.039</td><td>测量误差</td></tr>
                                <tr><td>时间扭曲</td><td>4×</td><td>8.1-9.2</td><td>0.036</td><td>代谢差异</td></tr>
                                <tr><td>幅度缩放</td><td>4×</td><td>8.0-9.4</td><td>0.041</td><td>敏感性差异</td></tr>
                                <tr><td>基线偏移</td><td>4×</td><td>7.7-9.6</td><td>0.034</td><td>代谢状态</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- 餐后血糖响应模型 -->
                <div class="card">
                    <h3>2. 餐后血糖响应模型 (IGT模式)</h3>
                    
                    <h4>分段函数模型:</h4>
                    <div class="formula-simple">
                        <strong>上升期:</strong> G(t) = G_baseline + (G_peak - G_baseline) × t/T_rise<br/>
                        <strong>峰值期:</strong> G(t) = G_peak + N(0, σ_peak²)<br/>
                        <strong>下降期:</strong> G(t) = G_peak - (G_peak - G_baseline) × α × (t-T_peak)/T_fall
                    </div>
                    
                    <h4>参数设定:</h4>
                    <ul>
                        <li><code>G_baseline = G_peak × 0.7</code>: 基线血糖</li>
                        <li><code>T_rise = 0.5h</code>: 上升期时长</li>
                        <li><code>T_peak = 1.0h</code>: 峰值维持期</li>
                        <li><code>T_fall = 1.0h</code>: 下降期时长</li>
                        <li><code>α = 0.8</code>: 下降衰减系数（IGT患者下降缓慢）</li>
                        <li><code>σ_peak = 0.3</code>: 峰值期噪声标准差</li>
                    </ul>
                    
                    <div class="mermaid-container">
                        <div class="mermaid">
                            graph TD
                                A["基线状态<br/>G_baseline = 7.2 mmol/L<br/>t = 0-30min"] --> B["上升期<br/>线性上升至峰值<br/>斜率 = (10.3-7.2)/0.5"]
                                
                                B --> C["峰值期<br/>G_peak ± N(0,0.3²)<br/>t = 30-60min"]
                                
                                C --> D["下降期<br/>指数衰减 × 0.8<br/>t = 60-120min"]
                                
                                D --> E["数据扩充"]
                                
                                E --> E1["个体差异<br/>variation ∈ [0.7,1.3]"]
                                E --> E2["代谢速率<br/>time_warp ∈ [0.9,1.1]"] 
                                E --> E3["胰岛素敏感性<br/>amplitude_scale ∈ [0.9,1.1]"]
                                E --> E4["基础代谢<br/>baseline_shift ∈ [-0.5,0.5]"]
                                
                                style A fill:#e8f5e8
                                style B fill:#fff3e0
                                style C fill:#ffcdd2
                                style D fill:#e1f5fe
                                style E fill:#f3e5f5
                        </div>
                    </div>
                    
                    <div class="viz-container">
                        <h5>IGT患者餐后血糖曲线示例:</h5>
                        <pre><code>基线血糖 (G_baseline): 7.2 mmol/L  
峰值血糖 (G_peak): 10.3 mmol/L
时间点: [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120] (分钟)
原始曲线: [7.2, 8.1, 9.4, 10.3, 10.1, 9.8, 9.5, 9.1, 8.7, 8.4, 8.0, 7.7, 7.4]</code></pre>
                    </div>
                    
                    <!-- IGT餐后血糖响应对比图 -->
                    <div class="comparison-chart">
                        <h5>📈 IGT餐后血糖响应及数据扩充对比</h5>
                        <canvas id="igtResponseChart" class="chart-canvas"></canvas>
                    </div>
                    
                    <div class="viz-grid">
                        <div class="viz-item green">
                            <h6>🔴 个体差异扩充 (variation_factor = 1.2)</h6>
                            <pre><code>时间: 0   30   60   90  120 (分钟)
原始: 7.2  10.3  9.5  8.4  7.4
扩充: 8.6  12.4 11.4 10.1  8.9
差异: +1.4 +2.1 +1.9 +1.7 +1.5</code></pre>
                            <p><strong>💡 模拟胰岛素抵抗较重的个体</strong></p>
                        </div>
                        
                        <div class="viz-item orange">
                            <h6>🟡 时间扭曲扩充 (warp_factor = 0.9)</h6>
                            <pre><code>时间: 0   27   54   81  108 (分钟)
原始: 7.2  10.3  9.5  8.4  7.4
扭曲: 7.2  10.3  9.1  7.9  7.2
变化: 0   0   -0.4 -0.5 -0.2</code></pre>
                            <p><strong>💡 模拟代谢更快的个体（峰值提前）</strong></p>
                        </div>
                        
                        <div class="viz-item blue">
                            <h6>🔵 幅度缩放扩充 (scale_factor = 0.95)</h6>
                            <pre><code>时间: 0   30   60   90  120 (分钟)
原始: 7.2  10.3  9.5  8.4  7.4
缩放: 7.4   9.9  9.2  8.2  7.2
变化: +0.2 -0.4 -0.3 -0.2  -0.2</code></pre>
                            <p><strong>💡 模拟胰岛素敏感性较高的个体</strong></p>
                        </div>
                        
                        <div class="viz-item purple">
                            <h6>🟣 基线偏移扩充 (shift = -0.3)</h6>
                            <pre><code>时间: 0   30   60   90  120 (分钟)
原始: 7.2  10.3  9.5  8.4  7.4
偏移: 6.9  10.0  9.2  8.1  7.1
差异: -0.3 -0.3 -0.3 -0.3 -0.3</code></pre>
                            <p><strong>💡 模拟基础代谢率较低的个体</strong></p>
                        </div>
                    </div>
                </div>
                
                <!-- 糖尿病血糖趋势模型 -->
                <div class="card">
                    <h3>3. 糖尿病血糖趋势模型</h3>
                    
                    <h4>线性趋势模型:</h4>
                    <div class="formula-simple">
                        G_DM(t) = G_base + β × t + ε(t)
                    </div>
                    
                    <h4>参数定义:</h4>
                    <ul>
                        <li><code>G_base ∼ Uniform(12.0, 20.0)</code>: 糖尿病基础血糖水平</li>
                        <li><code>β ∼ Uniform(-0.2, 0.2)</code>: 血糖变化趋势系数</li>
                        <li><code>ε(t) ∼ N(0, 1.0²)</code>: 高方差噪声（糖尿病血糖波动大）</li>
                    </ul>
                    
                    <h4>生理学解释:</h4>
                    <ul>
                        <li><strong>正β值:</strong> 血糖持续上升（胰岛素抵抗加重）</li>
                        <li><strong>负β值:</strong> 血糖逐渐下降（治疗响应）</li>
                        <li><strong>大噪声:</strong> 反映糖尿病患者血糖调节失控</li>
                    </ul>
                    
                    <div class="mermaid-container">
                        <div class="mermaid">
                            graph TD
                                A["糖尿病基线<br/>G_base = 15.2 mmol/L"] --> B["趋势建模<br/>G(t) = G_base + β×t + ε(t)"]
                                
                                B --> C1["恶化趋势<br/>β = +0.15<br/>血糖持续上升"]
                                B --> C2["稳定趋势<br/>β ≈ 0<br/>血糖波动维持"]  
                                B --> C3["改善趋势<br/>β = -0.10<br/>治疗效果显现"]
                                
                                C1 --> D["数据扩充变换"]
                                C2 --> D
                                C3 --> D
                                
                                D --> E1["高斯噪声<br/>σ = 1.0 (高变异)"]
                                D --> E2["个体差异<br/>variation ∈ [0.8,1.2]"]
                                D --> E3["参数变异<br/>β ± 0.05"]
                                D --> E4["基线调整<br/>G_base ± 2.0"]
                                
                                style A fill:#ffcdd2
                                style B fill:#fff3e0
                                style C1 fill:#ef5350
                                style C2 fill:#ffc107
                                style C3 fill:#66bb6a
                        </div>
                    </div>
                    
                    <div class="viz-container">
                        <h5>趋势系数扩充矩阵:</h5>
                        <table>
                            <thead>
                                <tr>
                                    <th>β值范围</th>
                                    <th>临床意义</th>
                                    <th>扩充策略</th>
                                    <th>样本权重</th>
                                    <th>目标参数调整</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>+0.1~+0.2</td><td>病情恶化</td><td>高噪声+个体差异</td><td>30%</td><td>增强刺激强度</td></tr>
                                <tr><td>-0.05~+0.05</td><td>病情稳定</td><td>标准扩充</td><td>40%</td><td>维持性治疗</td></tr>
                                <tr><td>-0.2~-0.1</td><td>治疗响应</td><td>低噪声+时间扭曲</td><td>30%</td><td>逐步减量</td></tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- 糖尿病趋势模型对比图 -->
                    <div class="comparison-chart">
                        <h5>📊 糖尿病血糖趋势模型对比</h5>
                        <canvas id="diabetesTrendChart" class="chart-canvas"></canvas>
                    </div>
                </div>
            </section>
            
            <!-- 刺激参数优化模型 -->
            <section id="param-optimization" class="fade-in">
                <h2>⚙️ 刺激参数优化模型</h2>
                
                <div class="card">
                    <div class="card-header">参数优化概述</div>
                    <p>刺激参数优化是taVNS治疗的核心，基于血糖序列的统计特征（均值、方差、趋势）自适应调整刺激参数，实现个体化治疗。</p>
                </div>
                
                <!-- 统计特征提取 -->
                <div class="card">
                    <h3>1. 血糖统计特征提取</h3>
                    
                    <div class="viz-grid">
                        <div class="viz-item green">
                            <h4>📊 均值特征 (μ_G)</h4>
                            <div class="formula-simple">
                                μ_G = (1/12) × Σ G(t_i)  [i=1 to 12]
                            </div>
                            <p><strong>临床意义:</strong> 反映血糖整体水平，用于频率调整</p>
                            <ul>
                                <li>μ_G < 6.0: 正常血糖 → 维持性频率</li>
                                <li>6.0 ≤ μ_G < 11.1: IFG/IGT → 中等频率</li>
                                <li>μ_G ≥ 11.1: 糖尿病 → 高频率刺激</li>
                            </ul>
                        </div>
                        
                        <div class="viz-item blue">
                            <h4>📈 方差特征 (σ²_G)</h4>
                            <div class="formula-simple">
                                σ²_G = (1/11) × Σ (G(t_i) - μ_G)²
                            </div>
                            <p><strong>临床意义:</strong> 反映血糖波动程度，用于时长调整</p>
                            <ul>
                                <li>σ²_G < 1.0: 稳定状态 → 短时间刺激</li>
                                <li>1.0 ≤ σ²_G < 4.0: 中度波动 → 标准时长</li>
                                <li>σ²_G ≥ 4.0: 高度波动 → 延长时间</li>
                            </ul>
                        </div>
                        
                        <div class="viz-item orange">
                            <h4>📉 趋势特征 (β_G)</h4>
                            <div class="formula-simple">
                                β_G = Σ(t_i - t̄)(G_i - Ḡ) / Σ(t_i - t̄)²
                            </div>
                            <p><strong>临床意义:</strong> 反映血糖变化趋势，用于电流调整</p>
                            <ul>
                                <li>β_G > 0.1: 上升趋势 → 增强电流</li>
                                <li>|β_G| ≤ 0.1: 稳定趋势 → 标准电流</li>
                                <li>β_G < -0.1: 下降趋势 → 温和电流</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- 自适应参数调整 -->
                <div class="card">
                    <h3>2. 自适应参数调整算法</h3>
                    
                    <div class="comparison-chart">
                        <h4>参数调整矩阵</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>血糖特征</th>
                                    <th>调整系数</th>
                                    <th>频率范围 (Hz)</th>
                                    <th>电流范围 (mA)</th>
                                    <th>时长范围 (min)</th>
                                    <th>临床场景</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>正常稳定<br/>μ_G=5.5, σ²_G=0.8, β_G=0.02</td>
                                    <td>k_f=0.8, k_I=0.9, k_T=0.8</td>
                                    <td>8-12</td>
                                    <td>0.8-1.2</td>
                                    <td>15-25</td>
                                    <td>预防性治疗</td>
                                </tr>
                                <tr>
                                    <td>IFG波动<br/>μ_G=6.8, σ²_G=2.1, β_G=0.05</td>
                                    <td>k_f=1.0, k_I=1.0, k_T=1.0</td>
                                    <td>10-15</td>
                                    <td>1.0-1.5</td>
                                    <td>20-30</td>
                                    <td>标准治疗</td>
                                </tr>
                                <tr>
                                    <td>糖尿病恶化<br/>μ_G=15.2, σ²_G=5.8, β_G=0.18</td>
                                    <td>k_f=1.3, k_I=1.4, k_T=1.2</td>
                                    <td>18-25</td>
                                    <td>2.0-2.8</td>
                                    <td>30-40</td>
                                    <td>积极治疗</td>
                                </tr>
                                <tr>
                                    <td>治疗响应<br/>μ_G=9.1, σ²_G=1.2, β_G=-0.15</td>
                                    <td>k_f=0.9, k_I=0.8, k_T=0.9</td>
                                    <td>8-14</td>
                                    <td>0.8-1.3</td>
                                    <td>15-25</td>
                                    <td>维持治疗</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h5>📊 参数调整公式：</h5>
                        <div class="formula-simple">
                            f_adj = f_base × k_f(μ_G, β_G)<br/>
                            I_adj = I_base × k_I(β_G)<br/>
                            T_adj = T_base × k_T(σ²_G)<br/>
                            PW_adj = PW_base × S_individual
                        </div>
                    </div>
                </div>
                
                <!-- 个体敏感性建模 -->
                <div class="card">
                    <h3>3. 个体敏感性建模</h3>
                    
                    <div class="viz-grid">
                        <div class="viz-item purple">
                            <h4>🧬 敏感性系数分布</h4>
                            <div class="formula-simple">
                                S ~ N(1.0, 0.2²)  truncated to [0.6, 1.4]
                            </div>
                            <ul>
                                <li><strong>S ∈ [0.6, 0.8]:</strong> 高敏感群体 (20%)</li>
                                <li><strong>S ∈ [0.8, 1.2]:</strong> 标准敏感群体 (60%)</li>
                                <li><strong>S ∈ [1.2, 1.4]:</strong> 低敏感群体 (20%)</li>
                            </ul>
                        </div>
                        
                        <div class="viz-item red">
                            <h4>⚡ 刺激强度计算</h4>
                            <div class="formula-simple">
                                I_stim = (f × I × T × PW) / 10⁶ × S
                            </div>
                            <p><strong>物理意义:</strong> 基于电荷密度理论，总刺激效果与个体敏感性的乘积</p>
                            <ul>
                                <li><strong>高敏感:</strong> 需要降低参数避免过度刺激</li>
                                <li><strong>低敏感:</strong> 需要增强参数保证治疗效果</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- 敏感性调整示例 -->
                    <div class="comparison-chart">
                        <h4>🎯 敏感性调整示例对比</h4>
                        <canvas id="sensitivityChart" class="chart-canvas"></canvas>
                    </div>
                </div>
                
                <!-- 实时参数优化流程 -->
                <div class="card">
                    <h3>4. 实时参数优化流程</h3>
                    
                    <div class="mermaid-container">
                        <div class="mermaid">
                            graph TD
                                A["📊 血糖序列输入<br/>G = [G₁, G₂, ..., G₁₂]"] --> B["📈 统计特征提取"]
                                
                                B --> B1["均值计算<br/>μ_G = mean(G)"]
                                B --> B2["方差计算<br/>σ²_G = var(G)"]
                                B --> B3["趋势计算<br/>β_G = slope(G)"]
                                
                                B1 --> C["🎯 参数调整系数计算"]
                                B2 --> C
                                B3 --> C
                                
                                C --> C1["频率系数<br/>k_f = f(μ_G, β_G)"]
                                C --> C2["电流系数<br/>k_I = f(β_G)"]
                                C --> C3["时长系数<br/>k_T = f(σ²_G)"]
                                
                                C1 --> D["⚙️ 参数计算"]
                                C2 --> D
                                C3 --> D
                                
                                D --> D1["f_adj = f_base × k_f"]
                                D --> D2["I_adj = I_base × k_I"]
                                D --> D3["T_adj = T_base × k_T"]
                                
                                D1 --> E["🧬 个体化调整"]
                                D2 --> E
                                D3 --> E
                                
                                E --> F["⚡ 最终刺激参数<br/>考虑个体敏感性S"]
                                
                                F --> G["📱 治疗设备输出"]
                                
                                style A fill:#e3f2fd
                                style B fill:#f3e5f5
                                style C fill:#e8f5e8
                                style D fill:#fff3e0
                                style E fill:#fce4ec
                                style F fill:#e0f2f1
                                style G fill:#ffebee
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 数据扩充技术 -->
            <section id="data-augmentation" class="fade-in">
                <h2>🔄 数据扩充技术</h2>
                
                <div class="card">
                    <div class="card-header">数据扩充概述</div>
                    <p>数据扩充是将基础样本从~100个扩展到>10,000个的关键技术。通过6种数学变换方法，系统地模拟临床环境中的各种变异情况。</p>
                </div>
                
                <!-- 高斯噪声注入 -->
                <div class="card">
                    <h3>1. 高斯噪声注入</h3>
                    
                    <h4>数学模型:</h4>
                    <div class="formula-simple">
                        G_noisy(t) = G_original(t) + ε_noise(t)<br/>
                        其中 ε_noise(t) ~ N(0, (α × σ_original)²)
                    </div>
                    
                    <h4>噪声水平:</h4>
                    <pre><code>noise_levels = [0.01, 0.02, 0.03, 0.05]  # 相对标准差</code></pre>
                    
                    <div class="viz-grid">
                        <div class="viz-item green">
                            <h6>🟢 轻微噪声 (α=0.01)</h6>
                            <pre><code>时间: 0   5  10  15  20  25 (分钟)
原始: 8.2 8.7 9.1 8.9 8.5 8.3
噪声: 8.19 8.71 9.11 8.88 8.51 8.29
差值: -0.01 +0.01 +0.01 -0.02 +0.01 -0.01</code></pre>
                            <p><strong>💡 模拟高精度血糖仪测量</strong></p>
                        </div>
                        
                        <div class="viz-item orange">
                            <h6>🟡 低度噪声 (α=0.02)</h6>
                            <pre><code>时间: 0   5  10  15  20  25 (分钟)
原始: 8.2 8.7 9.1 8.9 8.5 8.3
噪声: 8.17 8.73 9.13 8.87 8.53 8.32
差值: -0.03 +0.03 +0.03 -0.03 +0.03 +0.02</code></pre>
                            <p><strong>💡 模拟标准血糖仪精度</strong></p>
                        </div>
                        
                        <div class="viz-item blue">
                            <h6>🔵 中度噪声 (α=0.03)</h6>
                            <pre><code>时间: 0   5  10  15  20  25 (分钟)
原始: 8.2 8.7 9.1 8.9 8.5 8.3
噪声: 8.15 8.76 9.16 8.84 8.56 8.35
差值: -0.05 +0.06 +0.06 -0.06 +0.06 +0.05</code></pre>
                            <p><strong>💡 模拟生理微变化影响</strong></p>
                        </div>
                        
                        <div class="viz-item red">
                            <h6>🔴 高度噪声 (α=0.05)</h6>
                            <pre><code>时间: 0   5  10  15  20  25 (分钟)
原始: 8.2 8.7 9.1 8.9 8.5 8.3
噪声: 8.11 8.82 9.22 8.78 8.63 8.41
差值: -0.09 +0.12 +0.12 -0.12 +0.13 +0.11</code></pre>
                            <p><strong>💡 模拟环境干扰和应激反应</strong></p>
                        </div>
                    </div>
                    
                    <!-- 高斯噪声注入效果对比图 -->
                    <div class="comparison-chart">
                        <h5>🔊 高斯噪声注入效果对比</h5>
                        <canvas id="noiseInjectionChart" class="chart-canvas"></canvas>
                    </div>
                </div>
                
                <!-- 个体差异扩充效果统计汇总 -->
                <div class="card">
                    <h3>6. 个体差异扩充效果统计汇总</h3>
                    
                    <div class="viz-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>扩充方法</th>
                                    <th>变换类型</th>
                                    <th>参数范围</th>
                                    <th>扩充倍数</th>
                                    <th>临床意义</th>
                                    <th>数据质量</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>高斯噪声</strong></td><td>加性变换</td><td>α ∈ [0.01,0.05]</td><td>4×</td><td>测量误差模拟</td><td>⭐⭐⭐⭐⭐</td></tr>
                                <tr><td><strong>时间扭曲</strong></td><td>时域变换</td><td>warp ∈ [0.9,1.1]</td><td>4×</td><td>代谢速率差异</td><td>⭐⭐⭐⭐</td></tr>
                                <tr><td><strong>幅度缩放</strong></td><td>乘性变换</td><td>scale ∈ [0.9,1.1]</td><td>4×</td><td>胰岛素敏感性</td><td>⭐⭐⭐⭐⭐</td></tr>
                                <tr><td><strong>基线偏移</strong></td><td>平移变换</td><td>shift ∈ [-0.5,0.5]</td><td>4×</td><td>基础代谢状态</td><td>⭐⭐⭐⭐</td></tr>
                                <tr><td><strong>参数变异</strong></td><td>参数空间</td><td>mutation ∈ [0.05,0.15]</td><td>3×</td><td>设备个体差异</td><td>⭐⭐⭐</td></tr>
                                <tr><td><strong>个体差异</strong></td><td>综合变换</td><td>variation ∈ [0.7,1.3]</td><td>7×</td><td>个体化医疗</td><td>⭐⭐⭐⭐⭐</td></tr>
                                <tr class="alert alert-success"><td><strong>总计扩充</strong></td><td>-</td><td>-</td><td><strong>~30×</strong></td><td>覆盖临床多样性</td><td><strong>⭐⭐⭐⭐</strong></td></tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="alert alert-success">
                        <h5>扩充数据质量验证:</h5>
                        <pre><code>数据扩充质量评估指标
评估维度          原始数据    扩充后数据    改善程度
血糖范围覆盖      [6.5,12.0]  [3.0,30.0]   +150%
个体敏感性覆盖    [0.9,1.1]   [0.6,1.4]    +127%  
参数多样性        较单一      高度多样      +200%
临床场景覆盖      3种模式     8种模式       +167%
样本数量          ~100个      >10,000个     +9900%
数据平衡性        不均衡      均衡分布      显著改善</code></pre>
                    </div>
                </div>
            </section>
            
            <!-- 合成数据生成 -->
            <section id="synthetic-generation" class="fade-in">
                <h2>🏭 合成数据生成</h2>
                
                <div class="card">
                    <div class="card-header">合成数据概述</div>
                    <p>合成数据生成是系统的第三层数据扩充技术，通过组合8种血糖模式和7种参数策略，生成约8,000个合成样本。</p>
                </div>
                
                <div class="viz-grid">
                    <div class="card viz-item green">
                        <h3>📊 8种血糖模式分类</h3>
                        <ul>
                            <li><strong>正常空腹:</strong> G_base ∈ [4.5, 6.0] mmol/L</li>
                            <li><strong>空腹血糖受损(IFG):</strong> G_base ∈ [6.1, 7.0] mmol/L</li>
                            <li><strong>糖尿病模式:</strong> G_base ∈ [12.0, 20.0] mmol/L</li>
                            <li><strong>正常餐后血糖:</strong> 峰值 8.0-11.0 mmol/L</li>
                            <li><strong>餐后高血糖:</strong> 峰值 15.0-22.0 mmol/L</li>
                            <li><strong>低血糖模式:</strong> G_base ∈ [2.5, 4.0] mmol/L</li>
                            <li><strong>黎明现象:</strong> 晨间升高 2.0-4.0 mmol/L</li>
                            <li><strong>苏木杰效应:</strong> 低血糖反弹至12.0-18.0 mmol/L</li>
                        </ul>
                    </div>
                    
                    <div class="card viz-item blue">
                        <h3>⚙️ 7种参数策略</h3>
                        <ul>
                            <li><strong>保守策略:</strong> 低强度参数 (5-15Hz, 0.8-1.5mA)</li>
                            <li><strong>积极策略:</strong> 高强度参数 (15-30Hz, 2-3mA)</li>
                            <li><strong>个性化低敏感:</strong> 强化刺激 (10-25Hz, 1.5-2.5mA)</li>
                            <li><strong>个性化高敏感:</strong> 温和刺激 (3-12Hz, 0.5-1.2mA)</li>
                            <li><strong>频率导向:</strong> 高频率为主 (20-40Hz)</li>
                            <li><strong>幅度导向:</strong> 高电流为主 (2.5-4.0mA)</li>
                            <li><strong>时长导向:</strong> 长时间刺激 (45-60分钟)</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <h3>合成数据生成矩阵</h3>
                    <div class="alert alert-info">
                        <strong>样本数量计算:</strong><br>
                        总组合数 = 8种血糖模式 × 7种参数策略 = 56种组合<br>
                        每组合样本数 = 2000 ÷ 56 ≈ 35个<br>
                        <strong>总合成样本数 = 56 × 35 = 1,960个</strong>
                    </div>
                    
                    <div class="viz-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>血糖模式</th>
                                    <th>保守策略</th>
                                    <th>积极策略</th>
                                    <th>个性化低敏</th>
                                    <th>个性化高敏</th>
                                    <th>频率导向</th>
                                    <th>幅度导向</th>
                                    <th>时长导向</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>正常空腹</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td></tr>
                                <tr><td>IFG</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td></tr>
                                <tr><td>糖尿病</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td></tr>
                                <tr><td>正常餐后</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td></tr>
                                <tr><td>餐后高血糖</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td></tr>
                                <tr><td>低血糖</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td></tr>
                                <tr><td>黎明现象</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td></tr>
                                <tr><td>苏木杰效应</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td><td>35</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <!-- 数学公式汇总 -->
            <section id="formula-summary" class="fade-in">
                <h2>📊 数学公式汇总</h2>
                
                <div class="card">
                    <div class="card-header">核心数学公式总览</div>
                    <p>以下汇总了taVNS数据处理器中使用的所有核心数学公式：</p>
                </div>
                
                <div class="viz-grid">
                    <div class="card viz-item green">
                        <h3>🧮 血糖建模公式</h3>
                        
                        <h4>1. 周期性模型:</h4>
                        <div class="formula-simple">
                            G(t) = G_base × [1 + A × sin(ωt)] + ε(t)
                        </div>
                        
                        <h4>2. 餐后响应:</h4>
                        <div class="formula-simple">
                            G_IGT(t) = f_piecewise(t, G_baseline, G_peak, α)
                        </div>
                        
                        <h4>3. 趋势模型:</h4>
                        <div class="formula-simple">
                            G_DM(t) = G_base + β × t + ε(t)
                        </div>
                        
                        <h4>4. 黎明现象:</h4>
                        <div class="formula-simple">
                            G_dawn(t) = G_night + ΔG_morning × t/T + ε(t)
                        </div>
                    </div>
                    
                    <div class="card viz-item blue">
                        <h3>⚙️ 参数优化公式</h3>
                        
                        <h4>1. 频率调整:</h4>
                        <div class="formula-simple">
                            f_adj = f_base × k_f(μ_G, β_G)
                        </div>
                        
                        <h4>2. 电流调整:</h4>
                        <div class="formula-simple">
                            I_adj = I_base × k_I(β_G)
                        </div>
                        
                        <h4>3. 时长调整:</h4>
                        <div class="formula-simple">
                            T_adj = T_base × k_T(σ²_G)
                        </div>
                        
                        <h4>4. 个体调整:</h4>
                        <div class="formula-simple">
                            PW_adj = PW_base × S_individual
                        </div>
                    </div>
                    
                    <div class="card viz-item orange">
                        <h3>🔄 数据扩充公式</h3>
                        
                        <h4>1. 噪声注入:</h4>
                        <div class="formula-simple">
                            G_noisy = G_original + N(0, (α × σ_original)²)
                        </div>
                        
                        <h4>2. 时间扭曲:</h4>
                        <div class="formula-simple">
                            G_warped(t) = interp(t_original, t_warped, G_original)
                        </div>
                        
                        <h4>3. 幅度缩放:</h4>
                        <div class="formula-simple">
                            G_scaled = μ_G + (G_original - μ_G) × scale_factor
                        </div>
                        
                        <h4>4. 基线偏移:</h4>
                        <div class="formula-simple">
                            G_shifted = G_original + Δ_baseline
                        </div>
                        
                        <h4>5. 参数变异:</h4>
                        <div class="formula-simple">
                            P_mutated = P_original × (1 + ε_mutation)
                        </div>
                    </div>
                    
                    <div class="card viz-item red">
                        <h3>📈 强度计算公式</h3>
                        
                        <h4>1. 基础强度:</h4>
                        <div class="formula-simple">
                            I_stim = (f × I × T × PW) / 10⁶
                        </div>
                        
                        <h4>2. 累积效应:</h4>
                        <div class="formula-simple">
                            I_final = I_stim × k_cumulative(Duration)
                        </div>
                        
                        <p><strong>物理意义:</strong> 基于电刺激的电荷密度理论，刺激效果与总电荷量正相关。</p>
                    </div>
                </div>
            </section>
            
            <!-- 生理学基础 -->
            <section id="physiological-basis" class="fade-in">
                <h2>🧬 生理学基础</h2>
                
                <div class="card">
                    <div class="card-header">taVNS作用机制</div>
                    <p>经皮耳廓迷走神经刺激(taVNS)通过激活迷走神经调节血糖的生理学机制：</p>
                    
                    <div class="mermaid-container">
                        <div class="mermaid">
                            graph LR
                                A[耳廓电刺激] --> B[迷走神经激活]
                                B --> C[副交感神经兴奋]
                                C --> D[胰岛β细胞刺激]
                                C --> E[GLP-1分泌增加]
                                C --> F[胃排空延缓]
                                D --> G[胰岛素分泌增加]
                                E --> G
                                F --> H[餐后血糖峰值降低]
                                G --> I[血糖下降]
                                H --> I
                                
                                style A fill:#e3f2fd
                                style B fill:#fff3e0
                                style C fill:#e8f5e8
                                style I fill:#ffcdd2
                        </div>
                    </div>
                </div>
                
                <div class="viz-grid">
                    <div class="card viz-item green">
                        <h3>🧠 神经解剖基础</h3>
                        <ul>
                            <li><strong>迷走神经分布:</strong> 耳廓→脑干→胃肠道</li>
                            <li><strong>神经纤维类型:</strong> 有髓鞘C纤维和Aδ纤维</li>
                            <li><strong>中枢连接:</strong> 孤束核→迷走神经背核</li>
                            <li><strong>外周效应器:</strong> 胰岛、胃肠道、肝脏</li>
                        </ul>
                    </div>
                    
                    <div class="card viz-item blue">
                        <h3>⚡ 频率-效应关系</h3>
                        <ul>
                            <li><strong>低频刺激(2-10 Hz):</strong> 激活粗纤维，维持性治疗</li>
                            <li><strong>高频刺激(15-30 Hz):</strong> 激活细纤维，急性血糖控制</li>
                            <li><strong>交替频率:</strong> 避免神经适应，兼顾急慢性效应</li>
                            <li><strong>最佳窗口:</strong> 10-20 Hz，平衡效果与耐受性</li>
                        </ul>
                    </div>
                    
                    <div class="card viz-item orange">
                        <h3>📊 剂量-反应关系</h3>
                        <ul>
                            <li><strong>电流强度:</strong> 0.5-5.0 mA，避免疼痛感</li>
                            <li><strong>刺激时长:</strong> 20-40分钟，最佳治疗窗口</li>
                            <li><strong>治疗周期:</strong> 6-12周，累积效应显现</li>
                            <li><strong>个体差异:</strong> 0.6-1.4倍敏感性变异</li>
                        </ul>
                    </div>
                    
                    <div class="card viz-item red">
                        <h3>🔬 分子机制</h3>
                        <ul>
                            <li><strong>神经递质:</strong> 乙酰胆碱、GLP-1、胰岛素</li>
                            <li><strong>受体激活:</strong> M3胆碱能受体、GLP-1受体</li>
                            <li><strong>信号转导:</strong> cAMP/PKA通路、Ca²⁺信号</li>
                            <li><strong>基因表达:</strong> 胰岛素合成酶、葡萄糖转运蛋白</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <!-- 实现细节 -->
            <section id="implementation" class="fade-in">
                <h2>💻 实现细节</h2>
                
                <div class="card">
                    <div class="card-header">系统性能统计</div>
                    
                    <div class="viz-container">
                        <h3>🎯 训练数据规模</h3>
                        <table>
                            <thead>
                                <tr><th>数据类型</th><th>样本数量</th><th>数据来源</th><th>质量评级</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>基础样本</td><td>~100个</td><td>3篇论文实证数据</td><td>⭐⭐⭐⭐⭐</td></tr>
                                <tr><td>扩充样本</td><td>~2,000个</td><td>6种数学变换</td><td>⭐⭐⭐⭐</td></tr>
                                <tr><td>合成样本</td><td>~8,000个</td><td>8×7组合策略</td><td>⭐⭐⭐⭐</td></tr>
                                <tr class="alert alert-success"><td><strong>总样本数</strong></td><td><strong>>10,000个</strong></td><td><strong>多层次建模</strong></td><td><strong>⭐⭐⭐⭐</strong></td></tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="viz-grid">
                        <div class="viz-item green">
                            <h4>📊 数据多样性覆盖</h4>
                            <ul>
                                <li><strong>血糖模式:</strong> 8种病理生理状态</li>
                                <li><strong>参数策略:</strong> 7种临床治疗方案</li>
                                <li><strong>个体差异:</strong> 连续分布敏感性系数</li>
                                <li><strong>噪声水平:</strong> 4个不同噪声等级</li>
                                <li><strong>时间变异:</strong> 4种时间扭曲程度</li>
                            </ul>
                        </div>
                        
                        <div class="viz-item blue">
                            <h4>🔍 质量控制措施</h4>
                            <ul>
                                <li><strong>数据完整性:</strong> 12点血糖序列验证</li>
                                <li><strong>参数约束:</strong> 生理合理范围检查</li>
                                <li><strong>统计验证:</strong> 分布均匀性测试</li>
                                <li><strong>临床相关性:</strong> 医学专家审核</li>
                                <li><strong>标准化处理:</strong> StandardScaler + MinMaxScaler</li>
                            </ul>
                        </div>
                        
                        <div class="viz-item orange">
                            <h4>💡 技术创新点</h4>
                            <ul>
                                <li><strong>多模态融合:</strong> 动物+临床+健康人数据</li>
                                <li><strong>生理学驱动:</strong> 基于血糖调节机制建模</li>
                                <li><strong>个体化建模:</strong> 考虑个体敏感性差异</li>
                                <li><strong>自适应优化:</strong> 基于血糖特征的实时调整</li>
                                <li><strong>大规模扩充:</strong> 6种变换×多层次生成</li>
                            </ul>
                        </div>
                        
                        <div class="viz-item red">
                            <h4>🎯 临床应用价值</h4>
                            <ul>
                                <li><strong>精准医学:</strong> 个体化taVNS参数推荐</li>
                                <li><strong>治疗优化:</strong> 基于血糖模式的策略选择</li>
                                <li><strong>风险评估:</strong> 预测治疗响应和副作用</li>
                                <li><strong>成本效益:</strong> 减少试错时间和医疗费用</li>
                                <li><strong>标准化:</strong> 统一的taVNS治疗规范</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 总结 -->
            <section class="fade-in">
                <div class="card">
                    <div class="card-header">🔚 总结</div>
                    <p><code>taVNSDataProcessor</code>通过整合三篇高质量论文的实证数据，运用<strong>数学建模</strong>、<strong>数据扩充</strong>和<strong>合成数据生成</strong>技术，构建了一个大规模、高质量的taVNS参数预测训练数据集。</p>
                    
                    <div class="alert alert-success">
                        <h4>🎯 系统核心优势</h4>
                        <ol>
                            <li><strong>科学性:</strong> 基于已发表的临床研究数据</li>
                            <li><strong>系统性:</strong> 涵盖多种血糖模式和治疗策略</li>
                            <li><strong>个体化:</strong> 考虑个体敏感性差异</li>
                            <li><strong>可扩展:</strong> 支持新的血糖模式和参数策略</li>
                            <li><strong>高质量:</strong> 严格的数据质量控制和验证</li>
                        </ol>
                    </div>
                    
                    <div class="alert alert-info">
                        <h4>📈 应用前景</h4>
                        <p>该数据处理器为taVNS个性化治疗的机器学习模型提供了坚实的数据基础，有望推动精准医学在糖尿病治疗领域的应用，为患者提供更加精确、有效、安全的taVNS治疗方案。</p>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            fontFamily: 'Microsoft YaHei, sans-serif'
        });
        
        // Smooth scrolling for navigation links
        document.querySelectorAll('.toc a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Active navigation highlighting
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.toc a');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= sectionTop - 60) {
                    current = section.getAttribute('id');
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });
        
        // Add fade-in animation to elements as they come into view
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animationDelay = '0.1s';
                    entry.target.classList.add('fade-in');
                }
            });
        }, observerOptions);
        
        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });
        
        // Chart.js implementations
        // Wait for everything to be loaded
        window.addEventListener('load', function() {
        // Also make sure Chart is available
        if (typeof Chart === 'undefined') {
            console.error('Chart.js not loaded');
            return;
        }
            
            // 数据来源与基础部分的图表
            
            // 1. ZDF小鼠5周治疗效果对比图
            const zdfCtx = document.getElementById('zdfMouseChart');
            if (zdfCtx) {
                const zdfWeeks = [0, 1, 2, 3, 4, 5];
                const zdfControlGroup = [19, 22, 24, 27, 29, 32];
                const zdfTreatmentGroup = [19, 10, 11, 12, 12, 11];
                
                new Chart(zdfCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: zdfWeeks.map(w => '第' + w + '周'),
                        datasets: [{
                            label: '对照组',
                            data: zdfControlGroup,
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            borderWidth: 3,
                            pointRadius: 6,
                            pointBackgroundColor: '#e74c3c',
                            fill: true
                        }, {
                            label: 'taVNS治疗组',
                            data: zdfTreatmentGroup,
                            borderColor: '#27ae60',
                            backgroundColor: 'rgba(39, 174, 96, 0.1)',
                            borderWidth: 3,
                            pointRadius: 6,
                            pointBackgroundColor: '#27ae60',
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 8,
                                max: 35,
                                title: {
                                    display: true,
                                    text: '血糖浓度 (mmol/L)'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: '治疗周期'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'ZDF小鼠5周taVNS治疗血糖变化对比',
                                font: { size: 16 }
                            },
                            legend: {
                                display: true,
                                position: 'top'
                            }
                        }
                    }
                });
            }
            
            // 2. IGT患者12周2hPG测试结果对比图
            const igtPatientCtx = document.getElementById('igtPatientChart');
            if (igtPatientCtx) {
                const igtTimePoints = ['基线', '6周后', '12周后'];
                const igtTaVNSGroup = [9.7, 7.3, 7.5];
                const igtShamGroup = [9.1, 8.0, 8.0];
                const igtControlGroup = [9.3, 9.5, 10.0];
                
                new Chart(igtPatientCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: igtTimePoints,
                        datasets: [{
                            label: 'taVNS组',
                            data: igtTaVNSGroup,
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            borderWidth: 4,
                            pointRadius: 8,
                            pointBackgroundColor: '#3498db',
                            fill: true
                        }, {
                            label: '假刺激组',
                            data: igtShamGroup,
                            borderColor: '#f39c12',
                            backgroundColor: 'rgba(243, 156, 18, 0.1)',
                            borderWidth: 3,
                            pointRadius: 6,
                            pointBackgroundColor: '#f39c12',
                            fill: true
                        }, {
                            label: '无治疗组',
                            data: igtControlGroup,
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            borderWidth: 3,
                            pointRadius: 6,
                            pointBackgroundColor: '#e74c3c',
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 6,
                                max: 11,
                                title: {
                                    display: true,
                                    text: '2hPG血糖 (mmol/L)'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: '治疗时间点'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'IGT患者12周taVNS治疗2hPG测试结果对比',
                                font: { size: 16 }
                            },
                            legend: {
                                display: true,
                                position: 'top'
                            }
                        }
                    }
                });
            }
            
            // 3. 健康人餐后血糖抑制效果对比图
            const healthyCtx = document.getElementById('healthyPersonChart');
            if (healthyCtx) {
                const healthyTimePoints = [0, 15, 30, 45, 60, 90, 120, 150, 180];
                const healthyTaVNSGroup = [5.2, 6.8, 8.1, 7.8, 7.2, 6.5, 6.0, 5.7, 5.4];
                const healthyShamGroup = [5.1, 7.2, 9.0, 8.8, 8.1, 7.4, 6.8, 6.4, 6.0];
                
                new Chart(healthyCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: healthyTimePoints.map(t => t + ' 分钟'),
                        datasets: [{
                            label: 'taVNS组',
                            data: healthyTaVNSGroup,
                            borderColor: '#27ae60',
                            backgroundColor: 'rgba(39, 174, 96, 0.1)',
                            borderWidth: 4,
                            pointRadius: 6,
                            pointBackgroundColor: '#27ae60',
                            fill: true
                        }, {
                            label: '假刺激组',
                            data: healthyShamGroup,
                            borderColor: '#e67e22',
                            backgroundColor: 'rgba(230, 126, 34, 0.1)',
                            borderWidth: 3,
                            pointRadius: 6,
                            pointBackgroundColor: '#e67e22',
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 4.5,
                                max: 9.5,
                                title: {
                                    display: true,
                                    text: '血糖浓度 (mmol/L)'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: '餐后时间'
                                }
                            }
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: '健康人餐后血糖抑制效果对比（峰值降低10-15%）',
                                font: { size: 16 }
                            },
                            legend: {
                                display: true,
                                position: 'top'
                            }
                        }
                    }
                });
            }
            
            // 血糖序列建模部分的图表
            
            // 4. 周期性血糖波动对比图
            const cyclicElement = document.getElementById('cyclicGlucoseChart');
            if (!cyclicElement) {
                console.error('cyclicGlucoseChart element not found');
                return;
            }
            const cyclicCtx = cyclicElement.getContext('2d');
            const timePoints = [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55];
            const originalData = [8.3, 8.8, 9.1, 8.9, 8.4, 8.2, 8.3, 8.7, 9.0, 8.8, 8.5, 8.4];
            const noiseLevel1 = [8.28, 8.83, 9.13, 8.91, 8.38, 8.17, 8.32, 8.72, 9.02, 8.82, 8.52, 8.42];
            const noiseLevel2 = [8.25, 8.89, 9.17, 8.86, 8.45, 8.24, 8.35, 8.76, 9.05, 8.79, 8.55, 8.45];
            const timeWarp = [8.4, 8.9, 9.2, 8.8, 8.3, 8.1, 8.2, 8.6, 8.9, 8.7, 8.4, 8.3];
            const amplitudeScale = [8.1, 8.6, 8.9, 8.7, 8.2, 8.0, 8.1, 8.5, 8.8, 8.6, 8.3, 8.2];
            
            new Chart(cyclicCtx, {
                type: 'line',
                data: {
                    labels: timePoints.map(t => t + ' 分钟'),
                    datasets: [{
                        label: '原始数据',
                        data: originalData,
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 3,
                        pointRadius: 5,
                        pointBackgroundColor: '#3498db'
                    }, {
                        label: '高斯噪声 (α=0.02)',
                        data: noiseLevel1,
                        borderColor: '#f39c12',
                        backgroundColor: 'rgba(243, 156, 18, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [5, 5]
                    }, {
                        label: '高斯噪声 (α=0.05)',
                        data: noiseLevel2,
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [10, 5]
                    }, {
                        label: '时间扭曲',
                        data: timeWarp,
                        borderColor: '#9b59b6',
                        backgroundColor: 'rgba(155, 89, 182, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [2, 3]
                    }, {
                        label: '幅度缩放',
                        data: amplitudeScale,
                        borderColor: '#27ae60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [8, 2]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 7.5,
                            max: 9.5,
                            title: {
                                display: true,
                                text: '血糖浓度 (mmol/L)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '时间'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: '周期性血糖波动模型数据扩充对比',
                            font: { size: 16 }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
            
            // 5. IGT餐后血糖响应对比图
            const igtElement = document.getElementById('igtResponseChart');
            if (!igtElement) {
                console.warn('igtResponseChart element not found');
            } else {
                const igtCtx = igtElement.getContext('2d');
            const igtTimePoints = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120];
            const igtOriginal = [7.2, 8.1, 9.4, 10.3, 10.1, 9.8, 9.5, 9.1, 8.7, 8.4, 8.0, 7.7, 7.4];
            const igtVariation = [8.6, 9.7, 11.3, 12.4, 12.1, 11.8, 11.4, 10.9, 10.4, 10.1, 9.6, 9.2, 8.9];
            const igtTimeWarp = [7.2, 8.1, 9.4, 10.3, 10.1, 9.1, 8.7, 8.3, 7.9, 7.6, 7.3, 7.1, 7.2];
            const igtAmplitudeScale = [7.4, 8.3, 9.5, 9.9, 9.7, 9.4, 9.2, 8.9, 8.5, 8.2, 7.8, 7.5, 7.2];
            const igtBaselineShift = [6.9, 7.8, 9.1, 10.0, 9.8, 9.5, 9.2, 8.8, 8.4, 8.1, 7.7, 7.4, 7.1];
            
            new Chart(igtCtx, {
                type: 'line',
                data: {
                    labels: igtTimePoints.map(t => t + ' 分钟'),
                    datasets: [{
                        label: '原始IGT曲线',
                        data: igtOriginal,
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 4,
                        pointRadius: 6,
                        pointBackgroundColor: '#3498db',
                        fill: true
                    }, {
                        label: '个体差异扩充 (×1.2)',
                        data: igtVariation,
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 3,
                        pointRadius: 5,
                        borderDash: [5, 5]
                    }, {
                        label: '时间扭曲 (0.9×)',
                        data: igtTimeWarp,
                        borderColor: '#f39c12',
                        backgroundColor: 'rgba(243, 156, 18, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [10, 5]
                    }, {
                        label: '幅度缩放 (0.95×)',
                        data: igtAmplitudeScale,
                        borderColor: '#27ae60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [2, 3]
                    }, {
                        label: '基线偏移 (-0.3)',
                        data: igtBaselineShift,
                        borderColor: '#9b59b6',
                        backgroundColor: 'rgba(155, 89, 182, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [8, 2]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 6.5,
                            max: 13.0,
                            title: {
                                display: true,
                                text: '血糖浓度 (mmol/L)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '时间 (餐后分钟)'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'IGT患者餐后血糖响应模型及数据扩充对比',
                            font: { size: 16 }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
            }
            
            // 6. 糖尿病趋势模型对比图
            const diabetesElement = document.getElementById('diabetesTrendChart');
            if (!diabetesElement) {
                console.warn('diabetesTrendChart element not found');
            } else {
                const diabetesCtx = diabetesElement.getContext('2d');
            const diabetesTimePoints = [0, 10, 20, 30, 40, 50, 60];
            const diabetesBaseline = 15.2;
            const worseningTrend = diabetesTimePoints.map(t => diabetesBaseline + 0.15 * t/10 + Math.random() * 2 - 1);
            const stableTrend = diabetesTimePoints.map(t => diabetesBaseline + 0.02 * t/10 + Math.random() * 2 - 1);
            const improvingTrend = diabetesTimePoints.map(t => diabetesBaseline - 0.12 * t/10 + Math.random() * 2 - 1);
            
            new Chart(diabetesCtx, {
                type: 'line',
                data: {
                    labels: diabetesTimePoints.map(t => t + ' 分钟'),
                    datasets: [{
                        label: '恶化趋势 (β=+0.15)',
                        data: worseningTrend,
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 3,
                        pointRadius: 5,
                        pointBackgroundColor: '#e74c3c'
                    }, {
                        label: '稳定趋势 (β≈0)',
                        data: stableTrend,
                        borderColor: '#f39c12',
                        backgroundColor: 'rgba(243, 156, 18, 0.1)',
                        borderWidth: 3,
                        pointRadius: 5,
                        pointBackgroundColor: '#f39c12'
                    }, {
                        label: '改善趋势 (β=-0.12)',
                        data: improvingTrend,
                        borderColor: '#27ae60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        borderWidth: 3,
                        pointRadius: 5,
                        pointBackgroundColor: '#27ae60'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 12.0,
                            max: 18.0,
                            title: {
                                display: true,
                                text: '血糖浓度 (mmol/L)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '时间'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: '糖尿病血糖趋势模型对比（不同β值）',
                            font: { size: 16 }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
            }
            
            // 7. 敏感性调整示例对比图
            const sensitivityElement = document.getElementById('sensitivityChart');
            if (!sensitivityElement) {
                console.warn('sensitivityChart element not found');
            } else {
                const sensitivityCtx = sensitivityElement.getContext('2d');
            const sensitivityGroups = ['高敏感(S=0.7)', '标准敏感(S=1.0)', '低敏感(S=1.3)'];
            const frequencyData = [8.0, 10.0, 13.0];
            const currentData = [0.9, 1.2, 1.6];
            const durationData = [18, 25, 32];
            
            new Chart(sensitivityCtx, {
                type: 'bar',
                data: {
                    labels: sensitivityGroups,
                    datasets: [{
                        label: '频率 (Hz)',
                        data: frequencyData,
                        backgroundColor: 'rgba(52, 152, 219, 0.8)',
                        borderColor: '#3498db',
                        borderWidth: 2,
                        yAxisID: 'y'
                    }, {
                        label: '电流 (mA)',
                        data: currentData,
                        backgroundColor: 'rgba(231, 76, 60, 0.8)',
                        borderColor: '#e74c3c',
                        borderWidth: 2,
                        yAxisID: 'y1'
                    }, {
                        label: '时长 (min)',
                        data: durationData,
                        backgroundColor: 'rgba(39, 174, 96, 0.8)',
                        borderColor: '#27ae60',
                        borderWidth: 2,
                        yAxisID: 'y2'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            max: 15,
                            title: {
                                display: true,
                                text: '频率 (Hz)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            max: 2.0,
                            title: {
                                display: true,
                                text: '电流 (mA)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        },
                        y2: {
                            type: 'linear',
                            display: false,
                            max: 40
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: '个体敏感性调整参数对比',
                            font: { size: 16 }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
            }
            
            // 8. 高斯噪声注入效果对比图
            const noiseElement = document.getElementById('noiseInjectionChart');
            if (!noiseElement) {
                console.warn('noiseInjectionChart element not found');
            } else {
                const noiseCtx = noiseElement.getContext('2d');
            const noiseTimePoints = [0, 5, 10, 15, 20, 25];
            const noiseOriginal = [8.2, 8.7, 9.1, 8.9, 8.5, 8.3];
            const noise001 = [8.19, 8.71, 9.11, 8.88, 8.51, 8.29];
            const noise002 = [8.17, 8.73, 9.13, 8.87, 8.53, 8.32];
            const noise003 = [8.15, 8.76, 9.16, 8.84, 8.56, 8.35];
            const noise005 = [8.11, 8.82, 9.22, 8.78, 8.63, 8.41];
            
            new Chart(noiseCtx, {
                type: 'line',
                data: {
                    labels: noiseTimePoints.map(t => t + ' 分钟'),
                    datasets: [{
                        label: '原始数据',
                        data: noiseOriginal,
                        borderColor: '#2c3e50',
                        backgroundColor: 'rgba(44, 62, 80, 0.1)',
                        borderWidth: 4,
                        pointRadius: 6,
                        pointBackgroundColor: '#2c3e50'
                    }, {
                        label: '轻微噪声 (α=0.01)',
                        data: noise001,
                        borderColor: '#27ae60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [2, 2]
                    }, {
                        label: '低度噪声 (α=0.02)',
                        data: noise002,
                        borderColor: '#f39c12',
                        backgroundColor: 'rgba(243, 156, 18, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [5, 5]
                    }, {
                        label: '中度噪声 (α=0.03)',
                        data: noise003,
                        borderColor: '#e67e22',
                        backgroundColor: 'rgba(230, 126, 34, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [8, 3]
                    }, {
                        label: '高度噪声 (α=0.05)',
                        data: noise005,
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 2,
                        pointRadius: 4,
                        borderDash: [10, 5]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 7.8,
                            max: 9.5,
                            title: {
                                display: true,
                                text: '血糖浓度 (mmol/L)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '时间'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: '高斯噪声注入不同水平效果对比',
                            font: { size: 16 }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
            }
        });
    </script>
</body>
</html>